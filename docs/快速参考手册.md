# 酒店管理系统 - 快速参考手册 🚀

> 这是一份浓缩的参考手册，包含了答辩和演示所需的所有关键信息。

---

## 一、项目基本信息（30秒介绍）

**项目名称**: 酒店管理系统 (Hotel Management System)

**技术栈**: JavaWeb + JSP + MySQL + Bootstrap

**项目规模**:
- 📁 43个Java文件
- 📝 3000+行代码
- 🗄️ 5张数据表
- 🌐 20个JSP页面
- 📦 WAR包 12.6MB

**开发周期**: 约2个月

**核心功能**: 客户管理、房间管理、预订管理、统计分析

---

## 二、技术架构速览

### MVC三层架构
```
JSP页面 (View)
    ↓
Servlet (Controller) ← BaseController模板
    ↓
Service (Business Logic) ← 策略模式
    ↓
DAO (Data Access) ← 工厂模式
    ↓
MySQL数据库
```

### 6种设计模式
| 模式 | 应用位置 | 作用 |
|------|----------|------|
| 单例模式 | ConnectionPool | 全局唯一连接池 |
| 工厂模式 | DAOFactory, ServiceFactory | 对象创建 |
| 策略模式 | PriceCalculationStrategy | 价格计算 |
| 模板方法 | BaseController | 请求处理流程 |
| DAO模式 | 所有DAO类 | 数据访问封装 |
| 观察者模式 | 房间状态变更 | 事件通知 |

---

## 三、数据库设计速览

### 核心数据表
| 表名 | 说明 | 关键字段 |
|------|------|----------|
| users | 用户表 | user_id, username, password, role |
| customers | 客户表 | customer_id, name, phone, id_card, vip_level |
| room_types | 房间类型表 | type_id, type_name, price |
| rooms | 房间表 | room_id, room_number, type_id, status |
| bookings | 预订表 | booking_id, customer_id, room_id, total_price, status |

### E-R关系
```
users (1) ─── creates ───> (N) bookings
customers (1) ─── makes ───> (N) bookings
rooms (1) ─── has ───> (N) bookings
room_types (1) ─── contains ───> (N) rooms
```

---

## 四、核心功能速查

### 1. 用户管理
- ✅ 登录/登出
- ✅ 密码MD5加密
- ✅ Session管理（30分钟超时）
- ✅ 角色权限（ADMIN/STAFF）

### 2. 客户管理
- ✅ 客户CRUD
- ✅ 搜索（姓名/VIP等级）
- ✅ 分页展示
- ✅ 数据验证（手机号/身份证/邮箱）

**验证规则**:
- 手机号: 11位，格式1[3-9]\d{9}
- 身份证: 18位，符合规范
- 邮箱: 标准邮箱格式

### 3. 房间管理
- ✅ 房间类型管理
- ✅ 房间CRUD
- ✅ 状态管理（空闲/已预订/入住中/维护中）
- ✅ 筛选（按类型/状态）

### 4. 预订管理 ⭐
- ✅ 创建预订
- ✅ 价格自动计算（策略模式）
- ✅ 入住办理
- ✅ 退房结算
- ✅ 预订取消
- ✅ 冲突检测

**预订状态流转**:
```
PENDING → CONFIRMED → CHECKED_IN → CHECKED_OUT
   ↓         ↓            ↓
CANCELLED  CANCELLED  CANCELLED
```

### 5. 统计仪表板
- ✅ 今日入住/退房统计
- ✅ 房间入住率
- ✅ 客户总数/VIP客户
- ✅ 总收入统计

---

## 五、价格计算策略（重点）

### 计算公式
```
总价 = 房间单价 × 天数 × VIP折扣
```

### VIP折扣表
| VIP等级 | 折扣 | 说明 |
|---------|------|------|
| 0 (普通) | 1.0 | 无折扣 |
| VIP1 | 0.95 | 9.5折 |
| VIP2 | 0.90 | 9折 |
| VIP3 | 0.85 | 8.5折 |
| VIP4 | 0.80 | 8折 |
| VIP5 | 0.75 | 7.5折 |

### 策略模式实现
```java
// 选择策略
PriceCalculationStrategy strategy;
if (vipLevel > 0) {
    strategy = new VIPPriceStrategy();
} else {
    strategy = new RegularPriceStrategy();
}

// 计算价格
BigDecimal totalPrice = strategy.calculatePrice(roomType, days, vipLevel);
```

---

## 六、代码结构速查

### Controller层 (8个)
```
BaseController (抽象基类)
├── LoginController (登录)
├── LogoutController (登出)
├── IndexController (首页统计)
├── CustomerController (客户管理)
├── RoomController (房间管理)
├── BookingController (预订管理)
└── UserController (用户管理)
```

### Service层 (8个)
```
ServiceFactory (工厂)
CustomerService + Impl
RoomService + Impl
BookingService + Impl
UserService + Impl
PriceCalculationStrategy (策略接口)
├── RegularPriceStrategy
└── VIPPriceStrategy
```

### DAO层 (11个)
```
DAOFactory (工厂)
CustomerDAO + Impl
RoomDAO + Impl
RoomTypeDAO + Impl
BookingDAO + Impl
UserDAO + Impl
```

### Model层 (5个)
```
User
Customer
RoomType
Room
Booking
```

### Util层 (4个)
```
ConnectionPool (连接池 - 单例)
ConfigManager (配置管理 - 单例)
PasswordUtil (密码工具)
Utils (验证工具)
```

### Filter层 (2个)
```
CharacterEncodingFilter (编码过滤)
LoginFilter (登录拦截)
```

---

## 七、安全措施速查

| 安全措施 | 实现方式 | 位置 |
|----------|----------|------|
| 密码加密 | MD5 | PasswordUtil |
| SQL注入防护 | PreparedStatement | 所有DAO |
| XSS防护 | 输入输出转义 | Controller + JSP |
| 会话管理 | Session超时30分钟 | LoginController |
| 权限控制 | Filter拦截 | LoginFilter |
| 数据验证 | 前后端双重验证 | Controller + JSP |

---

## 八、性能优化速查

| 优化措施 | 实现方式 | 效果 |
|----------|----------|------|
| 连接池 | 自定义ConnectionPool | 连接复用，减少创建开销 |
| PreparedStatement | 所有SQL操作 | 预编译，提高性能 |
| 索引优化 | 主键+唯一+普通索引 | 提高查询速度 |
| 分页查询 | Controller层分页 | 减少数据加载量 |
| 静态资源缓存 | 浏览器缓存 | 减少请求次数 |

---

## 九、演示流程（5-8分钟）

### 演示顺序
1. **登录系统** (30秒)
   - 用户: admin / admin
   - 展示登录验证

2. **统计仪表板** (1分钟)
   - 今日入住/退房
   - 房间入住率
   - 客户统计

3. **客户管理** (1.5分钟)
   - 新增客户（展示验证）
   - 搜索客户
   - 编辑客户（VIP等级）

4. **房间管理** (1分钟)
   - 查看房间列表
   - 按状态筛选
   - 房间类型管理

5. **预订管理** (2分钟) ⭐重点
   - 创建预订
   - **展示价格计算**（VIP折扣）
   - 办理入住
   - 办理退房

6. **登出** (30秒)

### 演示数据准备
```sql
-- 客户
张三 (普通客户, VIP0)
李四 (VIP客户, VIP2)

-- 房间
101 (标准单人间, 200元/天)
201 (豪华套房, 500元/天)

-- 预订
今日入住: 张三, 101房间, 2天
今日退房: 李四, 201房间
```

---

## 十、常见问题快速答案

### Q1: 为什么选择Servlet而不是Spring?
**答**: 
1. 学习JavaWeb底层原理
2. 项目规模适中，Servlet足够
3. 更好的掌控力
4. 性能更轻量

### Q2: 价格计算策略如何实现?
**答**: 使用策略模式
- 接口: PriceCalculationStrategy
- 实现: RegularPriceStrategy (普通), VIPPriceStrategy (VIP)
- 根据VIP等级动态选择策略
- 易于扩展新策略

### Q3: 如何保证数据安全?
**答**:
1. 密码MD5加密存储
2. SQL注入防护（PreparedStatement）
3. XSS防护（转义）
4. Session超时控制
5. Filter权限拦截

### Q4: 如何防止房间重复预订?
**答**:
1. 预订前检查房间状态
2. 日期冲突检测
3. 事务控制（预订和房间状态同步更新）
4. 数据库唯一索引

### Q5: 如何处理并发?
**答**:
1. 数据库连接池支持并发
2. 事务控制保证一致性
3. 单例模式线程安全（双重检查锁定）
4. 关键代码段同步

### Q6: BaseController如何工作?
**答**: 使用模板方法模式
1. 定义请求处理流程骨架
2. 子类实现具体业务逻辑
3. 统一参数验证、权限检查、异常处理
4. 减少重复代码

### Q7: 连接池如何实现?
**答**: 单例模式
1. 私有构造函数
2. 静态getInstance方法
3. 双重检查锁定保证线程安全
4. 连接复用提高性能

### Q8: 如何提高查询性能?
**答**:
1. 建立索引（主键、唯一、普通）
2. PreparedStatement预编译
3. 分页查询减少加载量
4. 避免SELECT *
5. 合理使用JOIN

### Q9: 未来如何扩展?
**答**:
1. 功能: 移动端App、在线支付、积分系统
2. 技术: Spring Boot、前后端分离、微服务
3. 性能: Redis缓存、读写分离、分库分表

### Q10: 遇到的最大难点?
**答**: 预订管理模块
- 难点: 业务复杂，涉及状态变更、价格计算、冲突检测
- 解决: 分解问题、使用策略模式、事务控制、单元测试

---

## 十一、关键代码片段

### 1. 模板方法模式
```java
// BaseController
private void processRequest(HttpServletRequest req, HttpServletResponse resp) {
    // 1. 参数验证
    if (!validateParameters(req)) return;
    
    // 2. 权限检查
    if (!checkPermission(req)) return;
    
    // 3. 业务处理（抽象方法）
    String result = handleBusinessLogic(req, resp);
    
    // 4. 结果处理
    handleResult(req, resp, result);
}
```

### 2. 单例模式
```java
// ConnectionPool
private static volatile ConnectionPool instance;

public static ConnectionPool getInstance() {
    if (instance == null) {
        synchronized (ConnectionPool.class) {
            if (instance == null) {
                instance = new ConnectionPool();
            }
        }
    }
    return instance;
}
```

### 3. 策略模式
```java
// 价格计算
PriceCalculationStrategy strategy;
if (vipLevel > 0) {
    strategy = new VIPPriceStrategy();
} else {
    strategy = new RegularPriceStrategy();
}
BigDecimal price = strategy.calculatePrice(roomType, days, vipLevel);
```

### 4. SQL注入防护
```java
// ❌ 不安全
String sql = "SELECT * FROM users WHERE username='" + username + "'";

// ✅ 安全
String sql = "SELECT * FROM users WHERE username=?";
PreparedStatement pstmt = conn.prepareStatement(sql);
pstmt.setString(1, username);
```

### 5. MD5加密
```java
// PasswordUtil
public static String encryptPassword(String password) {
    MessageDigest md = MessageDigest.getInstance("MD5");
    byte[] bytes = md.digest(password.getBytes());
    return bytesToHex(bytes);
}
```

---

## 十二、答辩检查清单

### 知识准备 ✅
- [ ] 熟悉项目介绍（30秒流利表达）
- [ ] 理解MVC三层架构
- [ ] 掌握6种设计模式
- [ ] 熟悉数据库E-R图
- [ ] 理解价格计算策略
- [ ] 准备10个常见问题答案

### 演示准备 ✅
- [ ] 项目可正常启动
- [ ] 数据库有测试数据
- [ ] 所有功能测试通过
- [ ] 演示流程练习3次以上

### 材料准备 ✅
- [ ] 架构图（打印或电子版）
- [ ] E-R图（打印或电子版）
- [ ] 关键代码截图
- [ ] 备用U盘（源码）

---

## 十三、时间分配建议

**总时长**: 15-20分钟

| 环节 | 时间 | 内容 |
|------|------|------|
| 项目介绍 | 3分钟 | 背景、技术栈、功能概述 |
| 架构讲解 | 3分钟 | MVC架构、设计模式 |
| 功能演示 | 6分钟 | 核心功能演示（重点：预订管理） |
| 问题回答 | 5-8分钟 | 老师提问 |

---

## 十四、答辩话术模板

### 开场白
"各位老师好，我今天答辩的项目是酒店管理系统。这是一个基于JavaWeb技术栈开发的酒店运营管理系统，主要实现了客户管理、房间管理、预订管理等核心功能。

项目采用经典的MVC三层架构，应用了6种设计模式，代码总量约3000行，历时2个月完成。下面我将从技术架构和核心功能两方面进行介绍..."

### 技术亮点介绍
"在技术实现上，本项目有以下几个亮点：

1. **设计模式丰富**: 应用了单例、工厂、策略、模板方法等6种设计模式
2. **价格计算策略**: 使用策略模式实现VIP客户的动态折扣计算
3. **安全性完善**: 密码MD5加密、SQL注入防护、XSS防护
4. **性能优化**: 自定义连接池、PreparedStatement、索引优化

下面我演示一下核心功能..."

### 结束语
"以上就是我的项目介绍和演示，通过这个项目，我深入学习了JavaWeb技术栈，理解了MVC架构思想，掌握了多种设计模式的实际应用。感谢各位老师的指导，我的介绍完毕，请老师提问。"

---

## 🎯 最后提醒

1. **保持自信**: 这是你的项目，你最了解它
2. **清晰表达**: 语速适中，条理清晰
3. **诚实回答**: 不懂的问题诚实说"不太清楚"
4. **突出亮点**: 强调设计模式和技术难点
5. **准备充分**: 多次练习演示流程

---

**祝你答辩顺利，取得优异成绩！** 🎉🎓

---

**参考文档**:
- [项目概览](./00-项目概览.md)
- [答辩要点](./13-答辩要点.md)
- [Java文件详解索引](./99-Java文件详解索引.md)
- [完整文档导航](./README.md)
